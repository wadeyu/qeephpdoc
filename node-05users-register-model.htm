<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>QeePHP/FleaPHP 开源开发框架 - 起源科技开源社区|中国领先的 PHP 开源解决方案提供商</title>
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" type="text/css" href="base.css" tppabs="http://qeephp.com/qeephp/base.css" />
<link rel="stylesheet" type="text/css" href="jquery-ui-081120.css" tppabs="http://qeephp.com/qeephp/jquery-ui-081120.css" />
<script type="text/javascript" src="jquery-1.2.6.min.js" tppabs="http://qeephp.com/js/jquery-1.2.6.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.5.3-081202.min.js" tppabs="http://qeephp.com/qeephp/jquery-ui-1.5.3-081202.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
});
</script>
</head>
<body>

<div id="page-wrapper">

<!-- header -->
<div id="header">
  <div class="container clearfix">
    <div id="header_nav">
      <ul id="navigation">
        <li class="first"><a href="projects.htm" tppabs="http://qeephp.com/projects">开源项目与插件</a></li>
        <li><a href="cases.htm" tppabs="http://qeephp.com/cases">应用展示</a></li>
        <li><a href="framework.htm" tppabs="http://qeephp.com/framework">框架</a></li>
        <li><a href="docs.htm" tppabs="http://qeephp.com/docs">文档</a></li>
	  </ul>
    </div>
  </div>
</div>
<!-- /header -->


<!-- core -->
<div id="core" class="clearfix">
  <div class="container clearfix">

    

    <!-- 整页 -->

    <div id="fullpage" class="contents">

      
<div class="guide-section">

  <div class="guide-header">
    <span class="nav">
      <a href="index-4.htm" tppabs="http://qeephp.com/docs/">文档索引</a>
      &raquo;
      <a href="index-5.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/">QeePHP 快速入门</a>
      &raquo;
      <a href="node-05users.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users">实现用户功能</a>
      &raquo;
      用户注册（完善模型）    </span>
  </div>

  <div class="guide-section">
    <div class="guide-sidebar">
      
<h2>目录</h2>


<h3><a href="node-01start.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start">起步</a></h3>


<ul>
    <li>
    <a href="node-01start-environment.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-environment" subject="准备开发环境">准备开发环境</a>
  </li>
    <li>
    <a href="node-01start-creating-app.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-creating-app" subject="创建应用程序">创建应用程序</a>
  </li>
    <li>
    <a href="node-01start-dirstructure.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-dirstructure" subject="目录结构">目录结构</a>
  </li>
    <li>
    <a href="node-01start-mvc.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-mvc" subject="MVC 模式">MVC 模式</a>
  </li>
    <li>
    <a href="node-01start-mvc-startup.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-mvc-startup" subject="MVC 模式的启动">MVC 模式的启动</a>
  </li>
    <li>
    <a href="node-01start-mvc-controller.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-01start-mvc-controller" subject="控制器">控制器</a>
  </li>
  
</ul>



<h3><a href="node-02development.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-02development">开始开发</a></h3>


<ul>
    <li>
    <a href="node-02development-database.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-02development-database" subject="创建数据库">创建数据库</a>
  </li>
    <li>
    <a href="node-02development-yaml.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-02development-yaml" subject="YAML 入门">YAML 入门</a>
  </li>
    <li>
    <a href="node-02development-configs.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-02development-configs" subject="修改配置文件">修改配置文件</a>
  </li>
  
</ul>



<h3><a href="node-03automation.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-03automation">使用自动化工具</a></h3>


<ul>
    <li>
    <a href="node-03automation-controller.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-03automation-controller" subject="创建控制器">创建控制器</a>
  </li>
    <li>
    <a href="node-03automation-model.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-03automation-model" subject="创建模型">创建模型</a>
  </li>
  
</ul>



<h3><a href="node-04thinking.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-04thinking">编写代码之前的思考</a></h3>


<ul>
    <li>
    <a href="node-04thinking-oo.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-04thinking-oo" subject="用对象来思考">用对象来思考</a>
  </li>
    <li>
    <a href="node-04thinking-analysis.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-04thinking-analysis" subject="需求分析">需求分析</a>
  </li>
    <li>
    <a href="node-04thinking-creating-models.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-04thinking-creating-models" subject="创建需要的模型">创建需要的模型</a>
  </li>
  
</ul>



<h3><a href="node-05users.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users">实现用户功能</a></h3>


<ul>
    <li>
    <a href="node-05users-register-ui.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-register-ui" subject="用户注册（用户界面）">用户注册（用户界面）</a>
  </li>
    <li>
    <a href="node-05users-register-model.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-register-model" subject="用户注册（完善模型）">用户注册（完善模型）</a>
  </li>
    <li>
    <a href="node-05users-register-code.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-register-code" subject="用户注册（功能实现）">用户注册（功能实现）</a>
  </li>
    <li>
    <a href="node-05users-login.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-login" subject="用户登录和注销">用户登录和注销</a>
  </li>
    <li>
    <a href="node-05users-change-passwd.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-change-passwd" subject="修改密码">修改密码</a>
  </li>
  
</ul>



<h3><a href="node-06acl.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-06acl">访问控制</a></h3>


<ul>
    <li>
    <a href="node-06acl-why.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-06acl-why" subject="为什么要使用访问控制">为什么要使用访问控制</a>
  </li>
    <li>
    <a href="node-06acl-do.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-06acl-do" subject="实现访问控制">实现访问控制</a>
  </li>
  
</ul>



<h3><a href="node-07tasks.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-07tasks">实现任务管理</a></h3>


<ul>
    <li>
    <a href="node-07tasks-add.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-07tasks-add" subject="添加任务">添加任务</a>
  </li>
    <li>
    <a href="node-07tasks-edit.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-07tasks-edit" subject="修改和删除任务">修改和删除任务</a>
  </li>
    <li>
    <a href="node-07tasks-pagination.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-07tasks-pagination" subject="分页与最后的完善">分页与最后的完善</a>
  </li>
  
</ul>



<h3><a href="node-08routes.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-08routes">美化 URL</a></h3>


<ul>
    <li>
    <a href="node-08routes-router.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-08routes-router" subject="URL 路由是什么">URL 路由是什么</a>
  </li>
    <li>
    <a href="node-08routes-configs.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-08routes-configs" subject="启用 URL 路由">启用 URL 路由</a>
  </li>
    <li>
    <a href="node-08routes-rules.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-08routes-rules" subject="添加路由规则">添加路由规则</a>
  </li>
  
</ul>



<h3><a href="node-09review.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-09review">回顾</a></h3>


<ul>
    <li>
    <a href="node-09review-readmore.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-09review-readmore" subject="教程没有涉及的内容">教程没有涉及的内容</a>
  </li>
    <li>
    <a href="node-09review-improve.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-09review-improve" subject="进一步的改进">进一步的改进</a>
  </li>
  
</ul>



    </div>

    <div class="guide-contents formatted">
      
<h1>用户注册（完善模型）</h1>

<p>QeePHP
是一个遵循“领域驱动开发”思想的框架。而领域驱动中，最重要的就是模型。我们的大多数功能都是和模型有关的，所以在实现功能之前，首先要完善模型的定义。</p>

<p>先前创建的 User
模型只是半成品，现在我们需要对其进行完善。一个模型由几个方面组成：</p>

<ul>
	<li>属性：定义模型有哪些属性、属性的类型以及属性的行为和验证规则等</li>

	<li>行为：添加实现业务逻辑需要的方法，让模型逐步逼近实际的需求</li>

	<li>数据：由属性和存储模型属性的数据表组成，但属性不一定要和数据表一一对应</li>

	<li>关系：模型需要互相配合来实现业务需求，因此关系也是模型的一部分</li>
</ul>

<h4>完善模型的属性</h4>

<p>打开模型的定义文件，在 __define()
方法中可以找到模型的详细定义。这些定义分为几个部分：</p>

<ul>
	<li>指定存储模型使用的数据表</li>

	<li>属性和关联的定义，例如只读属性、虚拟属性、关联等</li>

	<li>对属性的验证规则</li>

	<li>安全性方面的定义</li>

	<li>行为插件的定义</li>
</ul>

<p>在 QeePHP 的模型中，属性本身具有多种特性：</p>

<ul>
	<li>是否是只读属性</li>

	<li>是否是虚拟属性</li>

	<li>是否有 getter 或 setter 方法</li>

	<li>类型</li>

	<li>验证规则</li>
</ul>

<blockquote>
	<p>对于 todo
	这样的简单应用，我们用不到这么多高级特性，所以上述内容了解一下就行了。</p>
</blockquote>

<p>todo 应用中，user
模型只有两个主要属性：用户名和密码。根据需求，这两个属性有下列要求：</p>

<ul>
	<li>用户名应该是唯一的</li>

	<li>用户一旦成功创建，就不能更改用户名，因此用户名必须是只读属性</li>

	<li>用户名不能少于 5 个字符，不能多于 15
	个字符，并且只能使用字母和数字组成</li>

	<li>密码不能少于 6 个字符，不能多于 20 个字符</li>

	<li>密码应该加密存储</li>
</ul>

<p>现在我们一步步来实现这些要求。</p>

<p>在 __define() 方法中的适当位置加入下列代码：</p>

<pre class="php code"><span class="st_h">'props'</span> <span
class="sy0">=&gt;</span> <span class="kw3">array</span><span
class="br0">&#40;</span>
    <span class="sy0">.....</span>
    <span
class="co1">// 指定 username 属性为只读</span>
    <span
class="st_h">'username'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'readonly'</span> <span class="sy0">=&gt;</span> <span
class="kw2">true</span><span class="br0">&#41;</span><span
class="sy0">,</span>
    <span class="sy0">.....</span>
<span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
<span
class="co4">/**
 * 指定更新数据库中的对象时，哪些属性的值不允许由外部提供
 */</span>
<span
class="st_h">'update_reject'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'username'</span><span class="sy0">,</span></pre>

<p>继续：</p>

<pre class="php code"><span class="st_h">'validations'</span> <span
class="sy0">=&gt;</span> <span class="kw3">array</span>
<span
class="br0">&#40;</span>
    <span
class="co1">// 指定 username 属性的验证规则</span>
    <span
class="st_h">'username'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
    <span class="br0">&#40;</span>
        <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'not_empty'</span><span class="sy0">,</span> <span
class="st_h">'用户名不能为空'</span><span class="br0">&#41;</span><span
class="sy0">,</span>
        <span class="kw3">array</span><span
class="br0">&#40;</span><span class="st_h">'min_length'</span><span
class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span
class="st_h">'用户名不能少于 5 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'max_length'</span><span class="sy0">,</span> <span
class="nu0">15</span><span class="sy0">,</span> <span
class="st_h">'用户名不能超过 15 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'is_alnum'</span><span class="sy0">,</span> <span
class="st_h">'用户名只能由字母和数字组成'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
    <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
    <span
class="co1">// 指定 password 属性的验证规则</span>
    <span
class="st_h">'password'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
    <span class="br0">&#40;</span>
        <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'not_empty'</span><span class="sy0">,</span> <span
class="st_h">'密码不能为空'</span><span class="br0">&#41;</span><span
class="sy0">,</span>
        <span class="kw3">array</span><span
class="br0">&#40;</span><span class="st_h">'min_length'</span><span
class="sy0">,</span> <span class="nu0">6</span><span class="sy0">,</span> <span
class="st_h">'密码不能少于 6 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'max_length'</span><span class="sy0">,</span> <span
class="nu0">20</span><span class="sy0">,</span> <span
class="st_h">'密码不能超过 20 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
    <span
class="br0">&#41;</span><span class="sy0">,</span>
<span
class="br0">&#41;</span><span class="sy0">,</span></pre>

<p>经过简单的设置，大部分要求都可以由 QeePHP
来处理了，剩下的密码加密存储则可以借助现成的 acluser
行为插件来实现。</p>

<h4>行为插件</h4>

<p>虽然我们可以通过自行编写代码来实现用户密码的加密存储，但
QeePHP
已经提供了现成的插件来帮助我们完成类似工作，并且提供了更丰富的特性。</p>

<p>acluser
行为插件应用到一个模型后，可以实现下列特征：</p>

<ul>
	<li>密码属性的自动加密</li>

	<li>验证用户名和密码的正确性</li>

	<li>验证用户名的唯一性</li>

	<li>查询用户的基本属性和角色信息</li>
</ul>

<p>要使用 acluser 插件，只需要修改 __define() 方法：</p>

<pre class="php code"><span
class="co1">// 指定该 ActiveRecord 要使用的行为插件</span>
<span
class="st_h">'behaviors'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'acluser'</span><span class="sy0">,</span>
&nbsp;
<span
class="co1">// 指定行为插件的配置</span>
<span
class="st_h">'behaviors_settings'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
<span class="br0">&#40;</span>
    <span
class="co2"># '插件名' =&gt; array('选项' =&gt; 设置),</span>
    <span
class="st_h">'acluser'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span>
        <span
class="st_h">'acl_data_props'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'username'</span><span class="sy0">,</span>
    <span
class="br0">&#41;</span><span class="sy0">,</span>
<span
class="br0">&#41;</span><span class="sy0">,</span></pre>

<p>acluser 插件的详细文档请参考： <a
href="class-model-behavior-acluser.htm" tppabs="http://qeephp.com/docs/qeephp-api/class-model-behavior-acluser">http://qeephp.com/docs/qeephp-api/class-model-behavior-acluser</a></p>

<p>最后，完整的 __define() 方法应该有如下内容：</p>

<pre class="php code"><span class="kw3">static</span> <span
class="kw2">function</span> __define<span class="br0">&#40;</span><span
class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span
class="kw1">return</span> <span class="kw3">array</span>
    <span
class="br0">&#40;</span>
        <span
class="co1">// 指定该 ActiveRecord 要使用的行为插件</span>
        <span
class="st_h">'behaviors'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'acluser'</span><span class="sy0">,</span>
&nbsp;
        <span
class="co1">// 指定行为插件的配置</span>
        <span
class="st_h">'behaviors_settings'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
        <span
class="br0">&#40;</span>
            <span
class="co2"># '插件名' =&gt; array('选项' =&gt; 设置),</span>
            <span
class="st_h">'acluser'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span>
                <span
class="st_h">'acl_data_props'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'username'</span><span class="sy0">,</span>
            <span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
        <span
class="co1">// 用什么数据表保存对象</span>
        <span
class="st_h">'table_name'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'users'</span><span class="sy0">,</span>
&nbsp;
        <span
class="co1">// 指定数据表记录字段与对象属性之间的映射关系</span>
        <span
class="co1">// 没有在此处指定的属性，QeePHP 会自动设置将属性映射为对象的可读写属性</span>
        <span
class="st_h">'props'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
        <span
class="br0">&#40;</span>
            <span
class="co1">// 主键应该是只读，确保领域对象的“不变量”</span>
            <span
class="st_h">'user_id'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'readonly'</span> <span class="sy0">=&gt;</span> <span
class="kw2">true</span><span class="br0">&#41;</span><span
class="sy0">,</span>
&nbsp;
            <span
class="co4">/**
             *  可以在此添加其他属性的设置
             */</span>
            <span
class="co2"># 'other_prop' =&gt; array('readonly' =&gt; true),</span>
            <span
class="st_h">'username'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'readonly'</span> <span class="sy0">=&gt;</span> <span
class="kw2">true</span><span class="br0">&#41;</span><span
class="sy0">,</span>
&nbsp;
            <span
class="co4">/**
             * 添加对象间的关联
             */</span>
            <span
class="co2"># 'other' =&gt; array('has_one' =&gt; 'Class'),</span>
&nbsp;
            <span
class="st_h">'tasks'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span><span class="br0">&#40;</span>QDB<span
class="sy0">::</span><span class="me2">HAS_MANY</span> <span
class="sy0">=&gt;</span> <span class="st_h">'Task'</span><span
class="sy0">,</span> <span class="st_h">'target_key'</span> <span
class="sy0">=&gt;</span> <span class="st_h">'user_id'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 允许使用 mass-assignment 方式赋值的属性
         *
         * 如果指定了 attr_accessible，则忽略 attr_protected 的设置。
         */</span>
        <span
class="st_h">'attr_accessible'</span> <span class="sy0">=&gt;</span> <span
class="st_h">''</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 拒绝使用 mass-assignment 方式赋值的属性
         */</span>
        <span
class="st_h">'attr_protected'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'user_id'</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 指定在数据库中创建对象时，哪些属性的值不允许由外部提供
         *
         * 这里指定的属性会在创建记录时被过滤掉，从而让数据库自行填充值。
         */</span>
        <span
class="st_h">'create_reject'</span> <span class="sy0">=&gt;</span> <span
class="st_h">''</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 指定更新数据库中的对象时，哪些属性的值不允许由外部提供
         */</span>
        <span
class="st_h">'update_reject'</span> <span class="sy0">=&gt;</span> <span
class="st_h">'username'</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 指定在数据库中创建对象时，哪些属性的值由下面指定的内容进行覆盖
         *
         * 如果填充值为 self::AUTOFILL_TIMESTAMP 或 self::AUTOFILL_DATETIME，
         * 则会根据属性的类型来自动填充当前时间（整数或字符串）。
         *
         * 如果填充值为一个数组，则假定为 callback 方法。
         */</span>
        <span
class="st_h">'create_autofill'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
        <span
class="br0">&#40;</span>
            <span
class="co2"># 属性名 =&gt; 填充值</span>
            <span
class="co2"># 'is_locked' =&gt; 0,</span>
        <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 指定更新数据库中的对象时，哪些属性的值由下面指定的内容进行覆盖
         *
         * 填充值的指定规则同 create_autofill
         */</span>
        <span
class="st_h">'update_autofill'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
        <span class="br0">&#40;</span>
        <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
        <span
class="co4">/**
         * 在保存对象时，会按照下面指定的验证规则进行验证。验证失败会抛出异常。
         *
         * 除了在保存时自动验证，还可以通过对象的 ::meta()-&gt;validate() 方法对数组数据进行验证。
         *
         * 如果需要添加一个自定义验证，应该写成
         *
         * 'title' =&gt; array(
         *        array(array(__CLASS__, 'checkTitle'), '标题不能为空'),
         * )
         *
         * 然后在该类中添加 checkTitle() 方法。函数原型如下：
         *
         * static function checkTitle($title)
         *
         * 该方法返回 true 表示通过验证。
         */</span>
        <span
class="st_h">'validations'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
        <span
class="br0">&#40;</span>
            <span class="st_h">'username'</span> <span
class="sy0">=&gt;</span> <span class="kw3">array</span>
            <span
class="br0">&#40;</span>
                <span class="kw3">array</span><span
class="br0">&#40;</span><span class="st_h">'not_empty'</span><span
class="sy0">,</span> <span class="st_h">'用户名不能为空'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
                <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'min_length'</span><span class="sy0">,</span> <span
class="nu0">5</span><span class="sy0">,</span> <span
class="st_h">'用户名不能少于 5 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
                <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'max_length'</span><span class="sy0">,</span> <span
class="nu0">15</span><span class="sy0">,</span> <span
class="st_h">'用户名不能超过 15 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
                <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'is_alnum'</span><span class="sy0">,</span> <span
class="st_h">'用户名只能由字母和数字组成'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
            <span
class="br0">&#41;</span><span class="sy0">,</span>
&nbsp;
            <span
class="st_h">'password'</span> <span class="sy0">=&gt;</span> <span
class="kw3">array</span>
            <span
class="br0">&#40;</span>
                <span class="kw3">array</span><span
class="br0">&#40;</span><span class="st_h">'not_empty'</span><span
class="sy0">,</span> <span class="st_h">'密码不能为空'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
                <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'min_length'</span><span class="sy0">,</span> <span
class="nu0">6</span><span class="sy0">,</span> <span
class="st_h">'密码不能少于 6 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
                <span
class="kw3">array</span><span class="br0">&#40;</span><span
class="st_h">'max_length'</span><span class="sy0">,</span> <span
class="nu0">20</span><span class="sy0">,</span> <span
class="st_h">'密码不能超过 20 个字符'</span><span
class="br0">&#41;</span><span class="sy0">,</span>
            <span
class="br0">&#41;</span><span class="sy0">,</span>
        <span
class="br0">&#41;</span><span class="sy0">,</span>
    <span
class="br0">&#41;</span><span class="sy0">;</span>
<span
class="br0">&#125;</span></pre>
    </div>

    <div class="nofloat"></div>
  </div>

  <div class="guide-footer">

    <table border="0" width="100%">
      <tr>
        <td align="left" width="200">
                    &laquo;
          <a href="node-05users-register-ui.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-register-ui">用户注册（用户界面）</a>
          
        </td>

        <td align="center">
          本章：<a href="node-05users.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users">实现用户功能</a>
          <br />
          <a href="index-5.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/">返回索引页</a>
        </td>

        <td align="right" width="200">
                    <a href="node-05users-register-code.htm" tppabs="http://qeephp.com/docs/qeephp-quickstart/node-05users-register-code">用户注册（功能实现）</a>
          &raquo;
                  </td>
      </tr>
    </table>

  </div>

</div>


    </div>

    <!-- 整页 -->



<div id="google-adsense-block720" style="margin: 10px auto 20px auto; width: 730px; height: 90px;"></div>


  </div>
</div>
<!-- /core -->

<!-- footer -->
<div id="footer">
  <div id="breadcrumbs">
    <p>
      <a href="index.htm" tppabs="http://qeephp.com/">返回首页</a>
      &nbsp;&nbsp;
      <a href="projects.htm" tppabs="http://qeephp.com/projects">开源项目与插件</a>
      &nbsp;&nbsp;
      <a href="cases.htm" tppabs="http://qeephp.com/cases">应用展示</a>
      &nbsp;&nbsp;
      <a href="framework.htm" tppabs="http://qeephp.com/framework">框架</a>
      &nbsp;&nbsp;
      <a href="docs.htm" tppabs="http://qeephp.com/docs">文档</a>
      &nbsp;&nbsp;
      <a href="index-1.htm" tppabs="http://qeephp.com/bbs/">论坛</a>
    </p>
  </div>
</div>
<!-- /footer -->

</div>
<!-- /page-wrapper -->

</body>
